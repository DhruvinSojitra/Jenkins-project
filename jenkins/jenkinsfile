pipeline {
    agent{
        label 'devops'
    }
    // options{

    //     buildDiscard(logRotater(numTokeepStr: '3'))
    // }
    // parameters {
    //     string(name: 'ImageName', defaultValue: 'jenkinsapp')
    //     string(name: 'ImageTag', defaultValue: 'latest')
    //     string(name: 'ContainerPort', defaultValue:'8088')
    //     string(name: 'ContainerName', defaultValue: 'Jenkinsapp')
    // }    
    stages{
        stage('App code checkout'){
            steps{
                git url: 'https://github.com/DhruvinSojitra/Jenkins-project.git', branch:'main'
            }
        }
        stage('Build image'){
            steps{
                sh "docker build -t ${params:ImageName}:${params.ImageTag} ."
            }
        }
        // stage('container create') {
        //     steps{
        //         sh "docker run -dit --name ${params.ContainerName} -p ${params.ContainerPort}:80 ${params:ImageName}"
        //     }
        // }
    }
}